version: '3.8'

services:
  scraper:
    build: .
    container_name: property-portals-scraper
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - PORT=3000
      - HEADLESS=true
      - SLOW_MO=0
      - BROWSER_TIMEOUT=30000
      - RATE_LIMIT_DELAY=1000
      # Add your OpenAI key if using smart selectors
      # - OPENAI_API_KEY=${OPENAI_API_KEY}
    restart: unless-stopped
    # Increase shared memory size for Chromium
    shm_size: 2gb
    # Memory limits (adjust based on your needs)
    mem_limit: 4g
    mem_reservation: 2g

